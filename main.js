(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e,n,o,r,i,u){var c=o.handleCardClick,a=r.deleteClickHandler,l=i.likeClickHandler,s=u.resetLikeClickHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=e,this._name=e.name,this._link=e.link,this._cardSelector=n,this._handleCardClick=c,this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".element__image"),this._likeButton=this._element.querySelector(".element__like-button"),this._elementName=this._element.querySelector(".element__name"),this._deleteButton=this._element.querySelector(".element__delete-button"),this._likeCounter=this._element.querySelector(".element__like-number"),this._numberOfLikes=e.likes,this._ownerId=e.owner._id,this._deleteClickHandler=a,this._likeClickHandler=l,this._resetlikeClickHandler=s,this._isLiked=this._data.likes.map((function(e){return e._id})).includes("11ab6d8f551dd307035c1b67")}var n,o;return n=t,(o=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}},{key:"createCard",value:function(){return this._addListeners(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._elementName.textContent=this._name,this._likeCounter.textContent=this._numberOfLikes.length.toString(),this._isLiked&&this._likeButton.classList.add("element__like-button_active"),"11ab6d8f551dd307035c1b67"===this._ownerId&&(this._deleteButton.style.display="grid"),this._element}},{key:"_getId",value:function(){return this._data._id}},{key:"_addListeners",value:function(){var e=this;this._deleteButton.addEventListener("click",(function(){e._deleteClickHandler(e._getId())})),this._likeButton.addEventListener("click",(function(){e._likeHandler(e._getId()),console.log("first point",e._isLiked)})),this._cardImage.addEventListener("click",(function(t){e._handleCardClick(t)}))}},{key:"_likeHandler",value:function(){console.log("I'm pushed"),console.log("I'm pushed, and here is all we have",this._data.likes),console.log("old like",this._isLiked),console.log("second point",this._isLiked),this._isLiked?(console.log("Iam going to reset like"),this._resetlikeClickHandler(this._getId()),console.log("third point",this._isLiked)):(console.log("Iam going to set like"),this._likeClickHandler(this._getId()))}},{key:"handleElementDelete",value:function(){this._element.remove(),this._element=null}},{key:"handleSetLike",value:function(e){console.log("forth point",this._isLiked),console.log("after set",e.likes.length.toString()),this._likeCounter.textContent=e.likes.length.toString(),this._likeButton.classList.add("element__like-button_active");var t=e.likes.map((function(e){return e._id})).includes("11ab6d8f551dd307035c1b67");console.log("liked or not(should be liked",t),this._isLiked=!0}},{key:"handleResetLike",value:function(e){console.log("after reset",e.likes.length.toString()),this._likeCounter.textContent=e.likes.length.toString(),this._likeButton.classList.remove("element__like-button_active"),e.likes.map((function(e){return e._id})).includes("11ab6d8f551dd307035c1b67"),this._isLiked=!1}}])&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._submitButton=t.submitButton,this._popupIsInvalid=t.popupIsInvalid,this._input=t.input,this._inputError=t.inputError,this._error=t.error,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._input)),this._button=this._form.querySelector(this._submitButton)}var t,o;return t=e,(o=[{key:"_showInputError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputError),t.textContent=e.validationMessage,t.classList.add(this._error)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputError),t.classList.remove(this._error),t.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_disableButton",value:function(){this._button.classList.add(this._popupIsInvalid),this._button.setAttribute("disabled","disabled")}},{key:"_enableButton",value:function(){this._button.classList.remove(this._popupIsInvalid),this._button.removeAttribute("disabled")}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():this._enableButton()}},{key:"_setEventListeners",value:function(){var e=this;this.toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e.toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&n(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var i=function(){function e(t,n){var o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),c(this,"_closeOnClick",(function(e){(e.target.classList.contains("popup_opened")&&e.target.closest(".popup__container")!=n._popupContainer||e.target.closest(".popup__close-button")==n._popupCloseButton)&&n.close()})),this._popup=document.querySelector(t),this._popupCloseButton=this._popup.querySelector(".popup__close-button"),this._popupContainer=this._popup.querySelector(".popup__container")}var t,n;return t=e,(n=[{key:"open",value:function(){var e=this;this._popup.classList.remove("popup_fade-out"),this._popup.classList.add("popup_fade-in"),setTimeout((function(){e._popup.classList.add("popup_opened")}),10),document.addEventListener("keydown",(function(t){e._handleEscClose(t)}))}},{key:"close",value:function(){var e=this;this._popup.classList.remove("popup_fade-in"),this._popup.classList.add("popup_fade-out"),setTimeout((function(){e._popup.classList.remove("popup_opened")}),400),document.removeEventListener("keydown",(function(e){_handleEscClose(e)}))}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){e._closeOnClick(t)}))}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=p(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},f.apply(this,arguments)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(o);if(r){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupCaption=t._popup.querySelector(".popup__caption"),t}return t=u,(n=[{key:"open",value:function(e){this._popupImage.src=e.link,this._popupImage.alt=e.name,this._popupCaption.textContent=e.name,f(_(u.prototype),"open",this).call(this)}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=k(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},v.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function w(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(o);if(r){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function u(e,t){var n,o,r,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c=function(e){e.preventDefault(),n._submitFormHandler(n._getInputValues())},(r="_submitFormHandlerFunction")in(o=O(n=i.call(this,e)))?Object.defineProperty(o,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[r]=c,n._submitFormHandler=t,n._form=n._popup.querySelector(".popup__form"),n._inputList=n._popup.querySelectorAll(".popup__input"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){this._form.addEventListener("submit",this._submitFormHandlerFunction),v(S(u.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){this._form.reset(),v(S(u.prototype),"close",this).call(this)}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a);function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function L(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=L((function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"getUserInfo",(function(){return{userName:o._userName.textContent,userJob:o._userJob.textContent}})),E(this,"setUserInfo",(function(e){o._userName.textContent=e.name,o._userJob.textContent=e.about})),this._userName=document.querySelector(t),this._userJob=document.querySelector(n)}));function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var q=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t,this._token=n,this._headers={"Content-type":"application/json",Authorization:this._token}}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards/"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка")}))}},{key:"getProfile",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка")}))}},{key:"addProfile",value:function(e){var t={name:e.surname,about:e.job};return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка")}))}},{key:"addCard",value:function(e){var t={name:e.name,link:e.link};return fetch("".concat(this._url,"/cards/"),{method:"POST",headers:this._headers,body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка")}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка")}))}},{key:"setLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка")}))}},{key:"resetLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка")}))}},{key:"addAvatar",value:function(e){var t={avatar:e.link};return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():Promise.reject("Возникла ошибка")}))}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=x(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},T.apply(this,arguments)}function x(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function D(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(o);if(r){var n=N(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function u(e,t){var n,o,r,c,a=t.submitDeletionHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c=function(e){e.preventDefault(),n._submitDeletionHandler()},(r="_submitDeletionHandlerFunction")in(o=A(n=i.call(this,e)))?Object.defineProperty(o,r,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[r]=c,n._submitDeletionHandler=a,n}return t=u,(n=[{key:"setEventListeners",value:function(){this._popup.addEventListener("submit",this._submitDeletionHandlerFunction),T(N(u.prototype),"setEventListeners",this).call(this)}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(a),F=new q("https://mesto.nomoreparties.co/v1/cohort-43","13e0d01a-3631-45a5-b3a6-1a7f87295049"),J={submitButton:".popup__save",popupIsInvalid:"popup__save_disabled",input:".popup__input",inputError:".popup__input_type_error",error:".error"},U=document.querySelector(".profile__edit-button"),z=document.querySelector(".popup__form_profile"),M=z.querySelector('input[name="surname"]'),G=z.querySelector('input[name="job"]'),K=document.querySelector(".profile__add-button"),Q=document.querySelector(".popup__form_add"),W=new C(".popup_profile",(function(e){z.querySelector(J.submitButton).textContent="Сохранение...",F.addProfile(e).then((function(e){ee.setUserInfo(e),W.close()})).catch((function(e){console.log(e)})).finally((function(){setTimeout((function(){z.querySelector(J.submitButton).textContent="Сохранить"}),400)}))})),X=document.querySelector(".popup__form_avatar"),Y=document.querySelector(".profile__avatar-edit-button"),Z=document.querySelector(".profile__avatar"),$=new C(".popup_avatar",(function(e){X.querySelector(J.submitButton).textContent="Сохранение...",F.addAvatar(e).then((function(e){document.querySelector(".profile__avatar").src=e.avatar,$.close()})).catch((function(e){console.log(e)})).finally((function(){setTimeout((function(){X.querySelector(J.submitButton).textContent="Сохранить"}),400)}))})),ee=new P(".profile__name",".profile__bio");X.querySelector(J.submitButton).textContent="Сохранить",Z.addEventListener("mouseover",(function(){Y.style.display="block"})),Z.addEventListener("mouseout",(function(){Y.style.display="none"})),Z.addEventListener("click",(function(){ie[X.name].toggleButtonState(),$.open()})),$.setEventListeners(),F.getInitialCards().then((function(e){oe.renderItems(e.reverse())})).catch((function(e){console.log(e)})),F.getProfile().then((function(e){document.querySelector(".profile__name").textContent=e.name,document.querySelector(".profile__bio").textContent=e.about,document.querySelector(".profile__avatar").src=e.avatar})).catch((function(e){console.log(e)})),W.setEventListeners(),U.addEventListener("click",(function(){ie[z.name].toggleButtonState(),W.open();var e=ee.getUserInfo();M.value=e.userName,G.value=e.userJob})),K.addEventListener("click",(function(){ie[Q.name].toggleButtonState(),re.open()}));var te=new y(".popup_zoom");function ne(e){var n=new t(e,".item-template",{handleCardClick:function(){te.open(e)}},{deleteClickHandler:function(e){console.log("cardId:",e);var t=new V(".popup_delete",{submitDeletionHandler:function(){console.log("i am here"),F.deleteCard(e).then((function(){t.close(),n.handleElementDelete()})).catch((function(e){console.log(e)}))}});t.setEventListeners(),t.open()}},{likeClickHandler:function(e){F.setLike(e).then((function(e){n.handleSetLike(e)})).catch((function(e){console.log(e)}))}},{resetLikeClickHandler:function(e){F.resetLike(e).then((function(e){n.handleResetLike(e)})).catch((function(e){console.log(e)}))}});return n.createCard()}te.setEventListeners();var oe=new i({renderer:function(e){oe.addItem(ne(e))}},".elements"),re=new C(".popup_add",(function(e){Q.querySelector(J.submitButton).textContent="Сохранение...",F.addCard(e).then((function(e){oe.addItem(ne(e)),re.close()})).catch((function(e){console.log(e)})).finally((function(){setTimeout((function(){Q.querySelector(J.submitButton).textContent="Сохранить"}),400)}))}));re.setEventListeners();var ie={};!function(e){Array.from(document.querySelectorAll(".popup__form")).forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()}));var n=new o(e,t);ie[t.name]=n,n.enableValidation()}))}(J)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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STJDLFFBQVF2TSxHQUNUMEksTUFBSyxTQUFDMUksR0FDTG9MLEdBQVNrQixRQUFRVCxHQUFXN0wsSUFDNUIyTCxHQUF1QnRGLFdBRXhCa0UsT0FBTSxTQUFDQyxHQUNOdEgsUUFBUUMsSUFBSXFILE1BRWJDLFNBQVEsV0FDUDdELFlBQVcsV0FDWHNELEVBQVlqSixjQUFjdUMsRUFBT0csY0FBY25CLFlBQWMsY0FDMUQsV0FJVG1KLEdBQXVCVixvQkFFdkIsSUFBTUYsR0FBaUIsSUFFRSxTQUFDdkgsR0FDUGMsTUFBTUMsS0FBS3JDLFNBQVNzQyxpQkFBaUIsaUJBQzdDZSxTQUFRLFNBQUM5QixHQUNoQkEsRUFBS1YsaUJBQWlCLFVBQVUsU0FBU0ssR0FDdkNBLEVBQUlpRSxvQkFFTixJQUFNbUYsRUFBZ0IsSUFBSWpKLEVBQWNDLEVBQVFDLEdBQ2hEc0gsR0FBZ0J0SCxFQUFLaEQsTUFBUytMLEVBQzlCQSxFQUFjQyxzQkFJbEJBLENBQWlCakosSSIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUG9wdXAgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICAvL9C60LvQsNGB0YEg0YHQvtC30LTQsNGR0YIg0LrQsNGA0YLQvtGH0LrRgyDRgSDRgtC10LrRgdGC0L7QvCDQuCDRgdGB0YvQu9C60L7QuSDQvdCwINC40LfQvtCx0YDQsNC20LXQvdC40LVcbiAgLy/Qv9GA0LjQvdC40LzQsNC10YIg0LIg0LrQvtC90YHRgtGA0YPQutGC0L7RgCDQtNCw0L3QvdGL0LUg0LrQsNGA0YLQvtGH0LrQuCDQuCDRgdC10LvQtdC60YLQvtGAINC10ZEgdGVtcGxhdGUt0Y3Qu9C10LzQtdC90YLQsDtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCB7aGFuZGxlQ2FyZENsaWNrfSwge2RlbGV0ZUNsaWNrSGFuZGxlcn0sIHtsaWtlQ2xpY2tIYW5kbGVyfSwge3Jlc2V0TGlrZUNsaWNrSGFuZGxlcn0pIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWJ1dHRvbicpO1xuICAgIHRoaXMuX2VsZW1lbnROYW1lID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbmFtZScpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZS1idXR0b24nKTtcbiAgICB0aGlzLl9saWtlQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtbnVtYmVyJyk7XG4gICAgdGhpcy5fbnVtYmVyT2ZMaWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX2RlbGV0ZUNsaWNrSGFuZGxlciA9IGRlbGV0ZUNsaWNrSGFuZGxlcjtcbiAgICB0aGlzLl9saWtlQ2xpY2tIYW5kbGVyID0gbGlrZUNsaWNrSGFuZGxlcjtcbiAgICB0aGlzLl9yZXNldGxpa2VDbGlja0hhbmRsZXIgPSByZXNldExpa2VDbGlja0hhbmRsZXJcbiAgICB0aGlzLl9pc0xpa2VkID0gdGhpcy5fZGF0YS5saWtlcy5tYXAoKGVsKSA9PiBlbC5faWQpLmluY2x1ZGVzKCcxMWFiNmQ4ZjU1MWRkMzA3MDM1YzFiNjcnKTtcblxuICB9XG4vL9GB0L7QtNC10YDQttC40YIg0L/RgNC40LLQsNGC0L3Ri9C1INC80LXRgtC+0LTRiywg0LrQvtGC0L7RgNGL0LUg0YDQsNCx0L7RgtCw0Y7RgiDRgSDRgNCw0LfQvNC10YLQutC+0LlcbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IG5ld0l0ZW0gPSBkb2N1bWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gbmV3SXRlbVxuICB9XG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICAvL2NvbmRpdGlvbiAtIGlmIGNhcmQgY3JlYXRlZCBieSBtZSAobm90IGluaXRpYWwpXG4gICAgdGhpcy5fYWRkTGlzdGVuZXJzKCk7XG4gICAgLy8g0JTQvtCx0LDQstC40Lwg0LTQsNC90L3Ri9C1XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbmtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZVxuICAgIHRoaXMuX2VsZW1lbnROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZVxuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbnVtYmVyT2ZMaWtlcy5sZW5ndGgudG9TdHJpbmcoKVxuICAgIC8vINCS0LXRgNC90ZHQvCDRjdC70LXQvNC10L3RgiDQvdCw0YDRg9C20YNcblxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX293bmVySWQgPT09IFwiMTFhYjZkOGY1NTFkZDMwNzAzNWMxYjY3XCIpIHtcbiAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJncmlkXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuLy/Rg9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDRgdC70YPRiNCw0YLQtdC70LXQuSDRgdC+0LHRi9GC0LjQuTpcbi8v0LfQtNC10YHRjCDQvdGD0LbQvdCwINGB0YLRgNC10LvQvtGH0L3QsNGPINGE0YPQvdC60YbQuNGPLCDRgi7Qui4g0L7QvdCwINC/0L7Qt9Cy0L7Qu9GP0LXRgiDQvtCx0YDQsNGC0LjRgtGM0YHRjyDQuiDQvtCx0YDQsNCx0L7RgtGH0LjQutCw0Lwg0YfQtdGA0LXQtyB0aGlzOlxuXG4gIF9nZXRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YS5faWQ7XG4gIH1cblxuICBfYWRkTGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2RlbGV0ZUNsaWNrSGFuZGxlcih0aGlzLl9nZXRJZCgpKTtcbiAgICB9KTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5fbGlrZUhhbmRsZXIodGhpcy5fZ2V0SWQoKSk7XG4gICAgICBjb25zb2xlLmxvZyhcImZpcnN0IHBvaW50XCIsIHRoaXMuX2lzTGlrZWQpO1xuXG4gICAgfSk7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKGV2dCk7XG4gICAgfSk7XG4gIH07XG5cbiAgX2xpa2VIYW5kbGVyKCl7XG4gICAgY29uc29sZS5sb2coXCJJJ20gcHVzaGVkXCIpXG4gICAgY29uc29sZS5sb2coXCJJJ20gcHVzaGVkLCBhbmQgaGVyZSBpcyBhbGwgd2UgaGF2ZVwiLCB0aGlzLl9kYXRhLmxpa2VzKVxuICAgIGNvbnNvbGUubG9nKFwib2xkIGxpa2VcIiwgdGhpcy5faXNMaWtlZCk7XG4gICAgY29uc29sZS5sb2coXCJzZWNvbmQgcG9pbnRcIiwgdGhpcy5faXNMaWtlZCk7XG5cbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xuICAgICAgY29uc29sZS5sb2coXCJJYW0gZ29pbmcgdG8gcmVzZXQgbGlrZVwiKVxuICAgICAgdGhpcy5fcmVzZXRsaWtlQ2xpY2tIYW5kbGVyKHRoaXMuX2dldElkKCkpO1xuICAgICAgY29uc29sZS5sb2coXCJ0aGlyZCBwb2ludFwiLCB0aGlzLl9pc0xpa2VkKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIklhbSBnb2luZyB0byBzZXQgbGlrZVwiKVxuICAgICAgdGhpcy5fbGlrZUNsaWNrSGFuZGxlcih0aGlzLl9nZXRJZCgpKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVFbGVtZW50RGVsZXRlKCkge1xuICAgIC8vIGNvbnN0IGRlbGV0ZVBvcHVwZXIgPSBuZXcgUG9wdXAoJy5wb3B1cF9kZWxldGUnKTtcbiAgICAvLyBkZWxldGVQb3B1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgaGFuZGxlU2V0TGlrZShkYXRhKSB7XG4gICAgY29uc29sZS5sb2coXCJmb3J0aCBwb2ludFwiLCB0aGlzLl9pc0xpa2VkKTtcblxuICAgIGNvbnNvbGUubG9nKFwiYWZ0ZXIgc2V0XCIsIGRhdGEubGlrZXMubGVuZ3RoLnRvU3RyaW5nKCkpXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aC50b1N0cmluZygpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICBjb25zdCBsaWtlZCA9IGRhdGEubGlrZXMubWFwKChlbCkgPT4gZWwuX2lkKS5pbmNsdWRlcygnMTFhYjZkOGY1NTFkZDMwNzAzNWMxYjY3Jyk7XG4gICAgY29uc29sZS5sb2coXCJsaWtlZCBvciBub3Qoc2hvdWxkIGJlIGxpa2VkXCIsIGxpa2VkKTtcbiAgICB0aGlzLl9pc0xpa2VkID0gdHJ1ZTtcbiAgfVxuICBoYW5kbGVSZXNldExpa2UoZGF0YSkge1xuICAgIGNvbnNvbGUubG9nKFwiYWZ0ZXIgcmVzZXRcIiwgZGF0YS5saWtlcy5sZW5ndGgudG9TdHJpbmcoKSk7XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aC50b1N0cmluZygpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImVsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICBjb25zdCBsaWtlZCA9IGRhdGEubGlrZXMubWFwKChlbCkgPT4gZWwuX2lkKS5pbmNsdWRlcygnMTFhYjZkOGY1NTFkZDMwNzAzNWMxYjY3Jyk7XG4gICAgLy8gY29uc29sZS5sb2coXCJsaWtlZFwiLCBsaWtlZCk7XG4gICAgdGhpcy5faXNMaWtlZCA9IGZhbHNlO1xuXG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAvL9C/0YDQuNC90LjQvNCw0LXRgiDQsiDQutC+0L3RgdGC0YDRg9C60YLQvtGAINC+0LHRitC10LrRgiDQvdCw0YHRgtGA0L7QtdC6INGBINGB0LXQu9C10LrRgtC+0YDQsNC80Lgg0Lgg0LrQu9Cw0YHRgdCw0LzQuCDRhNC+0YDQvNGLOlxuICAvL9C/0YDQuNC90LjQvNCw0LXRgiDQstGC0L7RgNGL0Lwg0L/QsNGA0LDQvNC10YLRgNC+0Lwg0Y3Qu9C10LzQtdC90YIg0YLQvtC5INGE0L7RgNC80YssINC60L7RgtC+0YDQsNGPINCy0LDQu9C40LTQuNGA0YPQtdGC0YHRjztcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gY29uZmlnLnN1Ym1pdEJ1dHRvbjtcbiAgICB0aGlzLl9wb3B1cElzSW52YWxpZCA9IGNvbmZpZy5wb3B1cElzSW52YWxpZDtcbiAgICB0aGlzLl9pbnB1dCA9IGNvbmZpZy5pbnB1dDtcbiAgICB0aGlzLl9pbnB1dEVycm9yID0gY29uZmlnLmlucHV0RXJyb3I7XG4gICAgdGhpcy5fZXJyb3IgPSBjb25maWcuZXJyb3I7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXQpKTtcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uKTtcbiAgfVxuXG4gIC8v0L/RgNC40LLQsNGC0L3Ri9C1INC80LXRgtC+0LTRiywg0LrQvtGC0L7RgNGL0LUg0L7QsdGA0LDQsdCw0YLRi9Cy0LDRjtGCINGE0L7RgNC80YM6XG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3IpO1xuICAgIGVycm9yLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3IuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvcik7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5IChpbnB1dCkge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0LCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9XG4gIH07XG5cbiAgX2hpZGVJbnB1dEVycm9yIChpbnB1dCkge1xuICAgIGNvbnN0IGVycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3IpO1xuICAgIGVycm9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3IpO1xuICAgIGVycm9yLnRleHRDb250ZW50ID0gJyc7XG4gIH07XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XG4gICAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSlcbiAgfVxuXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3BvcHVwSXNJbnZhbGlkKTtcbiAgICB0aGlzLl9idXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9wb3B1cElzSW52YWxpZCk7XG4gICAgdGhpcy5fYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgfVxuXG4gIC8v0LjQt9C80LXQvdGP0LXRgiDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQvdC+0L/QutC4INGB0LDQsdC80LjRgtCwOlxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKVxuICAgICAgfVxuICAgIH1cblxuICAvL9GD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINC+0LHRgNCw0LHQvtGC0YfQuNC60Lg6XG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy/Qv9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCwg0LrQvtGC0L7RgNGL0Lkg0LLQutC70Y7Rh9Cw0LXRgiDQstCw0LvQuNC00LDRhtC40Y4g0YTQvtGA0LzRiy5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9O1xufVxuXG4iLCJcbi8v0L/RgNC4INC+0YDQs9Cw0L3QuNC30LDRhtC40Lgg0LrQvtC00LAg0JrQu9Cw0YHRgdGLINC00L7Qu9C20L3RiyDQvtGB0YLQsNCy0LDRgtGM0YHRjyDQvdC10LfQsNCy0LjRgdC40LzRi9C80Lgs0YLQvtC70YzQutC+INGC0L7Qs9C00LAg0LjRhSDQvNC+0LbQvdC+XG4vL9Cx0YPQtNC10YIg0LjRgdC/0L7Qu9GM0LfQvtCy0LDRgtGMINCyINC00YDRg9Cz0LjRhSDQvNC10YHRgtCw0YVcXNC/0YDQvtC10LrRgtCw0YVcblxuLy/QutC70LDRgdGBINC+0YLQstC10YfQsNC10YIg0LfQsCDQstGB0YLQsNCy0LrRgyDRjdC70LXQvNC10L3RgtC+0LIg0LIg0YDQsNC30LzQtdGC0LrRg1xuLy9pdGVtcyAtINC80LDRgdGB0LjQsiDQtNCw0L3QvdGL0YUg0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINC90LAg0YHRgtGA0LDQvdC40YbRgyAtINGB0L/QuNGB0L7QuiBpbml0aWFsQ2FyZHMuanMg0LjQtyBuYW1lINC4IGxpbmtcbi8vcmVuZGVyZXIgLSAg0YTRg9C90LrRhtC40Y8gLSDRgdC+0LfQtNCw0LXRgiDQutCw0YDRgtC+0YfQutGDIChpbml0aWFsaXplQ2FyZCkg0Lgg0LLRgdGC0LDQstC70Y/QtdGCINC90LAg0YHRgtGA0LDQvdC40YbRgyAobG9jYXRlTmV3Q2FyZEFoZWFkKS5cbi8vcmVuZGVyZXIgLSDQodC+0LfQtNCw0L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNC+0LIg0LrQsNGA0YLQvtGH0LXQuiAobmV3IENhcmQpINC4INC40YUg0LLRgdGC0LDQstC60YMg0LIg0YDQsNC30LzQtdGC0LrRgyDQsdGD0LTQtdC8INC/0LXRgNC10LTQsNCy0LDRgtGMINCyINC60L7QvdGB0YLRgNGD0LrRgtC+0YAg0LrQu9Cw0YHRgdCwXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7cmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICAgIHJlbmRlckl0ZW1zKGNhcmRzKSB7XG4gICAgICBjYXJkcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyKGVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgYWRkSXRlbShkYXRhKXtcblxuICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZGF0YSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xuICAgIHRoaXMuX3BvcHVwQ29udGFpbmVyID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKTtcbiAgfVxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2ZhZGUtb3V0Jyk7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfZmFkZS1pbicpO1xuICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgICAgfSwgMTApO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLChldnQpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKGV2dCk7XG4gICAgfSApO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfZmFkZS1pbicpO1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX2ZhZGUtb3V0Jyk7XG4gICAgc2V0VGltZW91dCgoKT0+e1xuICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgICB9LCA0MDApO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpe1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbn1cblxuICBfY2xvc2VPbkNsaWNrID0gKGV2dCkgPT4ge1xuICBpZiAoKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkgJiYgKGV2dC50YXJnZXQuY2xvc2VzdCgnLnBvcHVwX19jb250YWluZXInKSAhPSB0aGlzLl9wb3B1cENvbnRhaW5lcikgfHwgKGV2dC50YXJnZXQuY2xvc2VzdCgnLnBvcHVwX19jbG9zZS1idXR0b24nKSA9PSB0aGlzLl9wb3B1cENsb3NlQnV0dG9uKSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4vL9C00L7QsdCw0LLQu9GP0LXRgiDRgdC70YPRiNCw0YLQtdC70Ywg0LjQutC+0L3QutC1INC30LDQutGA0YvRgtC40Y9cbnNldEV2ZW50TGlzdGVuZXJzKCkge1xuICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgdGhpcy5fY2xvc2VPbkNsaWNrKGV2dCk7XG4gIH0gKTtcbn1cbn1cblxuXG5cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpO1xuXG4gIH1cblxuICAvL9C/0LXRgNC10LfQsNC/0LjRgdCw0YLRjCBvcGVuINC40YHQv9C+0LvRjNC30YPRjyDQu9C+0LPQuNC60YMg0L/QvtC70LjQvNC+0YDRhNC40LfQvNCwXG4gIG9wZW4oZWxlbWVudCkge1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gZWxlbWVudC5saW5rO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gZWxlbWVudC5uYW1lO1xuICAgIHRoaXMuX3BvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IGVsZW1lbnQubmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRGb3JtSGFuZGxlcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdEZvcm1IYW5kbGVyID0gc3VibWl0Rm9ybUhhbmRsZXI7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgfVxuXG4gIF9zdWJtaXRGb3JtSGFuZGxlckZ1bmN0aW9uID0gKGV2dCkgPT4ge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuX3N1Ym1pdEZvcm1IYW5kbGVyKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xufVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpe1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbIGlucHV0Lm5hbWUgXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiAgdGhpcy5fZm9ybVZhbHVlc1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX3N1Ym1pdEZvcm1IYW5kbGVyRnVuY3Rpb24pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpeztcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZSwgdXNlckpvYikge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZSk7XG4gICAgdGhpcy5fdXNlckpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckpvYik7XG4gIH1cblxuLy/RgdC+0LHRgNCw0YLRjCDQtNCw0L3QvdGL0LUg0Lgg0L/QvtC00YHRgtCw0LLQuNGC0Ywg0LIg0YTQvtGA0LzRg1xuZ2V0VXNlckluZm8gPSAoKSA9PiB7XG4gIGNvbnN0IHVzZXJOYW1lID0gdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQ7XG4gIGNvbnN0IHVzZXJKb2IgPSB0aGlzLl91c2VySm9iLnRleHRDb250ZW50O1xuICByZXR1cm4ge3VzZXJOYW1lLCB1c2VySm9ifVxufVxuXG4vL9C/0YDQuNC90LjQvNCw0LXRgiDQvdC+0LLRi9C1INC00LDQvdC90YvQtSDQuCDQtNC+0LHQsNCy0LvRj9C10YIg0LjRhSDQvdCwINGB0YLRgNCw0L3QuNGG0YNcbi8v0L/QvtC70YPRh9Cw0LXRgiDQvtCx0YrQtdC60YIg0YEg0LrQu9GO0YfQsNC80Lgg0Lgg0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10YIg0LjRhSDQsiDRgNCw0LfQvNC10YLQutGDLlxuc2V0VXNlckluZm8gPSAoZGF0YSkgPT4ge1xuICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG59XG5cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHVybCwgdG9rZW4pIHtcbiAgICB0aGlzLl91cmwgPSB1cmw7XG4gICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcbiAgICB0aGlzLl9oZWFkZXJzID0ge1xuICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdBdXRob3JpemF0aW9uJzogdGhpcy5fdG9rZW4sXG4gICAgfVxuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzL2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCfQktC+0LfQvdC40LrQu9CwINC+0YjQuNCx0LrQsCcpXG4gICAgICB9KVxuICB9XG5cbiAgZ2V0UHJvZmlsZSgpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCfQktC+0LfQvdC40LrQu9CwINC+0YjQuNCx0LrQsCcpXG4gICAgICB9KVxuICB9XG5cbiAgYWRkUHJvZmlsZShkYXRhKSB7XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgIG5hbWU6IGRhdGEuc3VybmFtZSxcbiAgICAgIGFib3V0OiBkYXRhLmpvYlxuICAgIH1cbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KVxufSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCfQktC+0LfQvdC40LrQu9CwINC+0YjQuNCx0LrQsCcpXG4gICAgfSlcbiAgfVxuXG4gIGFkZENhcmQoZGF0YSkge1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICBsaW5rOiBkYXRhLmxpbmtcbiAgICB9XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcbn0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgn0JLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LAnKVxuICAgIH0pXG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgn0JLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LAnKVxuICAgIH0pXG4gIH1cblxuICBzZXRMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgn0JLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LAnKVxuICAgIH0pXG4gIH1cblxuICByZXNldExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCfQktC+0LfQvdC40LrQu9CwINC+0YjQuNCx0LrQsCcpXG4gICAgfSlcbiAgfVxuXG4gIGFkZEF2YXRhcihkYXRhKSB7XG4gICAgY29uc3QgYm9keSA9IHtcbiAgICAgIGF2YXRhcjogZGF0YS5saW5rLFxuICAgIH1cbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSlcbn0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgn0JLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LAnKVxuICAgIH0pXG4gIH1cblxuIH1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwge3N1Ym1pdERlbGV0aW9uSGFuZGxlcn0pe1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdERlbGV0aW9uSGFuZGxlciA9IHN1Ym1pdERlbGV0aW9uSGFuZGxlclxuICB9XG5cbiAgX3N1Ym1pdERlbGV0aW9uSGFuZGxlckZ1bmN0aW9uID0gKGV2dCkgPT4ge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuX3N1Ym1pdERlbGV0aW9uSGFuZGxlcigpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9zdWJtaXREZWxldGlvbkhhbmRsZXJGdW5jdGlvbilcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCIvL9GE0LDQudC7INGB0L7QtNC10YDQttC40YIg0YPQvdC40LrQsNC70YzQvdGL0Lkg0LTQu9GPINGB0YLRgNCw0L3QuNGG0Ysg0LrQvtC0IC0gMS7QodC+0LfQtNCw0L3QuNC1INC90L7QstGL0YUg0Y3QutC30LXQvNC/0LvRj9GA0L7QsiDQutC70LDRgdGB0L7QsiAyLtCS0LfQsNC40LzQvtC00LXQudGB0YLQstC40LUg0LzQtdC20LTRgyDQutC70LDRgdGB0LDQvNC4IDMu0J/QtdGA0LXQtNCw0YfRgyDQtNCw0L3QvdGL0YUg0LIg0LrQu9Cw0YHRgdGLXG4vL9C60L7RgNC90LXQstC+0Lkg0YTQsNC50Lsg0L/RgNC+0LXQutGC0LAgLSDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQvdC10L7QsdGF0L7QtNC40LzRi9GFINGE0YPQvdC60YbQuNC5INC4INC60LvQsNGB0YHQvtCyXG5cbmltcG9ydCAnLi9pbmRleC5jc3MnOyAvLyDQtNC+0LHQsNCy0YzRgtC1INC40LzQv9C+0YDRgiDQs9C70LDQstC90L7Qs9C+INGE0LDQudC70LAg0YHRgtC40LvQtdC5XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcydcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJ1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoU3VibWl0IGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQnO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKCdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQzJywgJzEzZTBkMDFhLTM2MzEtNDVhNS1iM2E2LTFhN2Y4NzI5NTA0OScpXG5cbmNvbnN0IGNvbmZpZyA9IHtcbiAgc3VibWl0QnV0dG9uOiAnLnBvcHVwX19zYXZlJyxcbiAgcG9wdXBJc0ludmFsaWQ6ICdwb3B1cF9fc2F2ZV9kaXNhYmxlZCcsXG4gIGlucHV0OiAnLnBvcHVwX19pbnB1dCcsXG4gIGlucHV0RXJyb3I6ICcucG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxuICBlcnJvcjogJy5lcnJvcidcbn1cblxuY29uc3QgcHJvZmlsZU9wZW5Qb3B1cEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgZm9ybVByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fcHJvZmlsZScpO1xuY29uc3QgbmFtZUlucHV0ID0gZm9ybVByb2ZpbGUucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cInN1cm5hbWVcIl0nKTtcbmNvbnN0IGpvYklucHV0ID0gZm9ybVByb2ZpbGUucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImpvYlwiXScpO1xuY29uc3QgZWxlbWVudE9wZW5Qb3B1cEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5jb25zdCBmb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV9hZGQnKTtcbmNvbnN0IHBvcHVwZXJQcm9maWxlV2l0aEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3Byb2ZpbGUnLCBzdWJtaXRGb3JtUHJvZmlsZUhhbmRsZXIpXG5jb25zdCBmb3JtQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtX2F2YXRhcicpO1xuY29uc3QgYXZhdGFyT3BlblBvcHVwQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1lZGl0LWJ1dHRvbicpO1xuY29uc3QgYXZhdGFySW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG5jb25zdCBwb3B1cGVyQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9hdmF0YXInLCBzdWJtaXRGb3JtQXZhdGFySGFuZGxlcilcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKCcucHJvZmlsZV9fbmFtZScsICcucHJvZmlsZV9fYmlvJylcblxuZnVuY3Rpb24gc3VibWl0Rm9ybVByb2ZpbGVIYW5kbGVyKGRhdGEpIHtcbiAgZm9ybVByb2ZpbGUucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uKS50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gIGFwaS5hZGRQcm9maWxlKGRhdGEpXG4gIC50aGVuKChkYXRhKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSlcbiAgICBwb3B1cGVyUHJvZmlsZVdpdGhGb3JtLmNsb3NlKClcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KVxuICAuZmluYWxseSgoKT0+e1xuICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICBmb3JtUHJvZmlsZS5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b24pLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCc7XG4gICAgfSwgNDAwKTtcbiAgfSlcbn1cblxuZm9ybUF2YXRhci5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b24pLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCc7XG5cbmZ1bmN0aW9uIHN1Ym1pdEZvcm1BdmF0YXJIYW5kbGVyKGRhdGEpIHtcbiAgZm9ybUF2YXRhci5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b24pLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcbiAgYXBpLmFkZEF2YXRhcihkYXRhKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJykuc3JjID0gZGF0YS5hdmF0YXI7XG4gICAgICBwb3B1cGVyQXZhdGFyLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpPT57XG4gICAgICBzZXRUaW1lb3V0KCgpPT57XG4gICAgICBmb3JtQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvbikudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJztcbiAgICAgIH0sIDQwMCk7XG4gICAgfSlcbn1cblxuYXZhdGFySW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKCkgPT4ge1xuICBhdmF0YXJPcGVuUG9wdXBCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG59KVxuXG5hdmF0YXJJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsICgpID0+IHtcbiAgYXZhdGFyT3BlblBvcHVwQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG59KVxuXG5hdmF0YXJJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbIGZvcm1BdmF0YXIubmFtZSBdLnRvZ2dsZUJ1dHRvblN0YXRlKClcbiAgcG9wdXBlckF2YXRhci5vcGVuKCk7XG59KVxuXG5wb3B1cGVyQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuYXBpLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChpbml0aWFsQ2FyZHMpID0+IHtcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHMucmV2ZXJzZSgpKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KVxuXG5hcGkuZ2V0UHJvZmlsZSgpXG4gIC50aGVuKChwcm9maWxlSW5mbykgPT4ge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJykudGV4dENvbnRlbnQgPSBwcm9maWxlSW5mby5uYW1lO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19iaW8nKS50ZXh0Q29udGVudCA9IHByb2ZpbGVJbmZvLmFib3V0O1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKS5zcmMgPSBwcm9maWxlSW5mby5hdmF0YXI7XG4gICAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KVxuXG5wb3B1cGVyUHJvZmlsZVdpdGhGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnByb2ZpbGVPcGVuUG9wdXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzWyBmb3JtUHJvZmlsZS5uYW1lIF0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgcG9wdXBlclByb2ZpbGVXaXRoRm9ybS5vcGVuKCk7XG4gIGNvbnN0IGluaXRpYWxJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gaW5pdGlhbEluZm8udXNlck5hbWU7XG4gIGpvYklucHV0LnZhbHVlID0gaW5pdGlhbEluZm8udXNlckpvYjtcbn0pO1xuXG5lbGVtZW50T3BlblBvcHVwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1sgZm9ybUVsZW1lbnQubmFtZSBdLnRvZ2dsZUJ1dHRvblN0YXRlKClcblxuICBwb3B1cGVyRWxlbWVudFdpdGhGb3JtLm9wZW4oKTtcbn0gKTtcblxuY29uc3QgcG9wdXBlclpvb20gPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF96b29tJylcbnBvcHVwZXJab29tLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZWxlbWVudCl7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChlbGVtZW50LFxuICAgICcuaXRlbS10ZW1wbGF0ZScsXG4gICAge2hhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgIHBvcHVwZXJab29tLm9wZW4oZWxlbWVudCl9fSxcbiAgICB7ZGVsZXRlQ2xpY2tIYW5kbGVyOiAoY2FyZElkKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnY2FyZElkOicsIGNhcmRJZClcbiAgICAgIGNvbnN0IGRlbGV0ZVBvcHVwZXIgPSBuZXcgUG9wdXBXaXRoU3VibWl0KCcucG9wdXBfZGVsZXRlJyxcbiAgICAgICB7c3VibWl0RGVsZXRpb25IYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJpIGFtIGhlcmVcIilcbiAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlUG9wdXBlci5jbG9zZSgpO1xuICAgICAgICAgICAgY2FyZC5oYW5kbGVFbGVtZW50RGVsZXRlKClcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0pXG4gICAgICAgfX0pXG4gICAgICAgZGVsZXRlUG9wdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgIGRlbGV0ZVBvcHVwZXIub3BlbigpO1xuICAgIH19LFxuICAgIHtsaWtlQ2xpY2tIYW5kbGVyOiAoY2FyZElkKSA9PiB7XG4gICAgICBhcGkuc2V0TGlrZShjYXJkSWQpXG4gICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICBjYXJkLmhhbmRsZVNldExpa2UoZGF0YSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSlcbiAgICB9fSxcbiAgICB7cmVzZXRMaWtlQ2xpY2tIYW5kbGVyOiAoY2FyZElkKSA9PiB7XG4gICAgICBhcGkucmVzZXRMaWtlKGNhcmRJZClcbiAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIGNhcmQuaGFuZGxlUmVzZXRMaWtlKGRhdGEpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pXG4gICAgfX1cbiAgICApXG5cbiAgICByZXR1cm4gY2FyZC5jcmVhdGVDYXJkKCk7XG59XG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICAgIHJlbmRlcmVyOiAoZWxlbWVudCkgPT4ge1xuICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoZWxlbWVudCkpXG4gIH1cbn0sXG4nLmVsZW1lbnRzJ1xuKTtcblxuY29uc3QgcG9wdXBlckVsZW1lbnRXaXRoRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfYWRkJywgc3VibWl0Rm9ybUVsZW1lbnRIYW5kbGVyKVxuXG5mdW5jdGlvbiBzdWJtaXRGb3JtRWxlbWVudEhhbmRsZXIgKGRhdGEpIHtcbiAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uKS50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gIGFwaS5hZGRDYXJkKGRhdGEpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSlcbiAgICAgIHBvcHVwZXJFbGVtZW50V2l0aEZvcm0uY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCk9PntcbiAgICAgIHNldFRpbWVvdXQoKCk9PntcbiAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvbikudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJztcbiAgICAgIH0sIDQwMCk7XG4gICAgfSlcbn1cblxucG9wdXBlckVsZW1lbnRXaXRoRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9XG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2Zvcm0nKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm0pID0+IHtcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSlcbiAgICBjb25zdCBmb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtKTtcbiAgICBmb3JtVmFsaWRhdG9yc1sgZm9ybS5uYW1lIF0gPSBmb3JtVmFsaWRhdG9yO1xuICAgIGZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcblxuXG5cbiJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImRlbGV0ZUNsaWNrSGFuZGxlciIsImxpa2VDbGlja0hhbmRsZXIiLCJyZXNldExpa2VDbGlja0hhbmRsZXIiLCJ0aGlzIiwiX2RhdGEiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2NhcmRJbWFnZSIsInF1ZXJ5U2VsZWN0b3IiLCJfbGlrZUJ1dHRvbiIsIl9lbGVtZW50TmFtZSIsIl9kZWxldGVCdXR0b24iLCJfbGlrZUNvdW50ZXIiLCJfbnVtYmVyT2ZMaWtlcyIsImxpa2VzIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl9kZWxldGVDbGlja0hhbmRsZXIiLCJfbGlrZUNsaWNrSGFuZGxlciIsIl9yZXNldGxpa2VDbGlja0hhbmRsZXIiLCJfaXNMaWtlZCIsIm1hcCIsImVsIiwiaW5jbHVkZXMiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfYWRkTGlzdGVuZXJzIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJ0b1N0cmluZyIsImNsYXNzTGlzdCIsImFkZCIsInN0eWxlIiwiZGlzcGxheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZ2V0SWQiLCJfbGlrZUhhbmRsZXIiLCJjb25zb2xlIiwibG9nIiwiZXZ0IiwicmVtb3ZlIiwibGlrZWQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybSIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b24iLCJfcG9wdXBJc0ludmFsaWQiLCJwb3B1cElzSW52YWxpZCIsIl9pbnB1dCIsImlucHV0IiwiX2lucHV0RXJyb3IiLCJpbnB1dEVycm9yIiwiX2Vycm9yIiwiZXJyb3IiLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbiIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwic29tZSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfZGlzYWJsZUJ1dHRvbiIsIl9lbmFibGVCdXR0b24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiY2FyZHMiLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJjbG9zZXN0IiwiX3BvcHVwQ29udGFpbmVyIiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJfcG9wdXAiLCJzZXRUaW1lb3V0IiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9jbG9zZU9uQ2xpY2siLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltYWdlIiwiX3BvcHVwQ2FwdGlvbiIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtSGFuZGxlciIsInByZXZlbnREZWZhdWx0IiwiX3N1Ym1pdEZvcm1IYW5kbGVyIiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJ2YWx1ZSIsIl9zdWJtaXRGb3JtSGFuZGxlckZ1bmN0aW9uIiwicmVzZXQiLCJVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckpvYiIsIl91c2VyTmFtZSIsIl91c2VySm9iIiwiYWJvdXQiLCJBcGkiLCJ1cmwiLCJ0b2tlbiIsIl91cmwiLCJfdG9rZW4iLCJfaGVhZGVycyIsImZldGNoIiwiaGVhZGVycyIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiYm9keSIsInN1cm5hbWUiLCJqb2IiLCJtZXRob2QiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwiYXZhdGFyIiwiUG9wdXBXaXRoU3VibWl0Iiwic3VibWl0RGVsZXRpb25IYW5kbGVyIiwiX3N1Ym1pdERlbGV0aW9uSGFuZGxlciIsIl9zdWJtaXREZWxldGlvbkhhbmRsZXJGdW5jdGlvbiIsImFwaSIsInByb2ZpbGVPcGVuUG9wdXBCdXR0b24iLCJmb3JtUHJvZmlsZSIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiZWxlbWVudE9wZW5Qb3B1cEJ1dHRvbiIsImZvcm1FbGVtZW50IiwicG9wdXBlclByb2ZpbGVXaXRoRm9ybSIsImFkZFByb2ZpbGUiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJmaW5hbGx5IiwiZm9ybUF2YXRhciIsImF2YXRhck9wZW5Qb3B1cEJ1dHRvbiIsImF2YXRhckltYWdlIiwicG9wdXBlckF2YXRhciIsImFkZEF2YXRhciIsImZvcm1WYWxpZGF0b3JzIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiZ2V0SW5pdGlhbENhcmRzIiwiaW5pdGlhbENhcmRzIiwiY2FyZExpc3QiLCJyZW5kZXJJdGVtcyIsInJldmVyc2UiLCJnZXRQcm9maWxlIiwicHJvZmlsZUluZm8iLCJpbml0aWFsSW5mbyIsImdldFVzZXJJbmZvIiwicG9wdXBlckVsZW1lbnRXaXRoRm9ybSIsInBvcHVwZXJab29tIiwiY3JlYXRlQ2FyZCIsImNhcmQiLCJkZWxldGVQb3B1cGVyIiwiZGVsZXRlQ2FyZCIsImhhbmRsZUVsZW1lbnREZWxldGUiLCJzZXRMaWtlIiwiaGFuZGxlU2V0TGlrZSIsInJlc2V0TGlrZSIsImhhbmRsZVJlc2V0TGlrZSIsImFkZEl0ZW0iLCJhZGRDYXJkIiwiZm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9